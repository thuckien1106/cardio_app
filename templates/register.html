{% extends 'base.html' %} {% block content %}

<div class="login-wrapper">
  <div class="card login-card shadow-lg p-4">
    <!-- TiÃªu Ä‘á» -->
    <div class="text-center mb-3">
      <div class="logo-circle mb-3">
        <i class="bi bi-person-plus-fill fs-1 text-success"></i>
      </div>
      <h2 class="fw-bold text-gradient">ÄÄƒng kÃ½ tÃ i khoáº£n</h2>
      <p class="text-muted">
        Vui lÃ²ng nháº­p thÃ´ng tin bÃªn dÆ°á»›i Ä‘á»ƒ táº¡o tÃ i khoáº£n
      </p>
    </div>

    <!-- ğŸ”” Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %} {% for category, msg in messages %}
    <div
      class="alert alert-{{ category }} text-center rounded-pill shadow-sm mt-2"
    >
      {{ msg }}
    </div>
    {% endfor %} {% endif %} {% endwith %}

    <!-- Form Ä‘Äƒng kÃ½ -->
    <form method="post">
      <!-- Há» tÃªn -->
      <div class="mb-3 input-group rounded-pill shadow-sm">
        <span class="input-group-text"
          ><i class="bi bi-person-fill text-primary"></i
        ></span>
        <input
          type="text"
          name="ho_ten"
          class="form-control border-0 rounded-end rounded-pill"
          placeholder="Há» vÃ  tÃªn"
          required
        />
      </div>

      <!-- Giá»›i tÃ­nh -->
      <div class="mb-3 input-group rounded-pill shadow-sm">
        <span class="input-group-text"
          ><i class="bi bi-gender-ambiguous text-primary"></i
        ></span>
        <select
          name="gioi_tinh"
          class="form-select border-0 rounded-end rounded-pill"
          required
        >
          <option value="">-- Chá»n giá»›i tÃ­nh --</option>
          <option value="Nam">Nam</option>
          <option value="Ná»¯">Ná»¯</option>
        </select>
      </div>

      <!-- NgÃ y sinh -->
      <div class="mb-3 input-group rounded-pill shadow-sm">
        <span class="input-group-text"
          ><i class="bi bi-calendar-date text-primary"></i
        ></span>
        <input
          type="date"
          name="ngay_sinh"
          class="form-control border-0 rounded-end rounded-pill"
          max="{{ today }}"
          required
        />
      </div>

      <!-- Email -->
      <div class="mb-3 input-group rounded-pill shadow-sm">
        <span class="input-group-text"
          ><i class="bi bi-envelope-fill text-primary"></i
        ></span>
        <input
          type="email"
          name="email"
          class="form-control border-0 rounded-end rounded-pill"
          placeholder="Email"
          required
        />
      </div>

      <!-- Máº­t kháº©u -->
      <div class="mb-4 input-group rounded-pill shadow-sm position-relative">
        <span class="input-group-text"
          ><i class="bi bi-lock-fill text-primary"></i
        ></span>
        <input
          type="password"
          name="mat_khau"
          id="pwInput"
          class="form-control border-0 rounded-end rounded-pill"
          placeholder="Máº­t kháº©u (Ã­t nháº¥t 8 kÃ½ tá»±, cÃ³ kÃ½ tá»± Ä‘áº·c biá»‡t, chá»¯ hoa vÃ  sá»‘)"
          required
        />
      </div>

      <!-- Hiá»ƒn thá»‹ Ä‘á»™ máº¡nh máº­t kháº©u -->
      <div class="text-center mb-3">
        <small id="pwStrength" class="fw-semibold"></small>
      </div>

      <!-- NÃºt Ä‘Äƒng kÃ½ -->
      <button
        type="submit"
        class="btn btn-success w-100 py-2 rounded-pill fw-semibold shadow-sm"
      >
        ÄÄƒng kÃ½
      </button>

      <p class="text-center mt-3 small text-muted">
        ÄÃ£ cÃ³ tÃ i khoáº£n?
        <a
          href="{{ url_for('login') }}"
          class="text-decoration-none fw-semibold"
          >ÄÄƒng nháº­p</a
        >
      </p>
    </form>
  </div>
</div>

<!-- Script kiá»ƒm tra Ä‘á»™ máº¡nh máº­t kháº©u -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const input = document.getElementById("pwInput");
    const label = document.getElementById("pwStrength");

    input.addEventListener("input", () => {
      const val = input.value;
      let s = 0;
      if (val.length >= 8) s++;
      if (/[A-Z]/.test(val)) s++;
      if (/\d/.test(val)) s++;
      if (/[@$!%*?&]/.test(val)) s++;

      if (!val) {
        label.innerHTML = "";
      } else if (s <= 1) {
        label.innerHTML = "ğŸ”´ Máº­t kháº©u yáº¿u";
        label.className = "text-danger fw-semibold";
      } else if (s === 2 || s === 3) {
        label.innerHTML = "ğŸŸ¡ Máº­t kháº©u trung bÃ¬nh";
        label.className = "text-warning fw-semibold";
      } else {
        label.innerHTML = "ğŸŸ¢ Máº­t kháº©u máº¡nh";
        label.className = "text-success fw-semibold";
      }
    });
  });
</script>

{% endblock %}
