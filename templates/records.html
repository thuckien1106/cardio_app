{% extends 'base.html' %}
{% block content %}
<div class="container mt-5">
  <h2 class="fw-bold text-gradient mb-4">üìÅ B·ªánh √°n</h2>
  <p class="text-muted">Danh s√°ch b·ªánh √°n ƒë√£ ƒë∆∞·ª£c ghi nh·∫≠n t·ª´ c√°c l·∫ßn ch·∫©n ƒëo√°n.</p>

  {% if records and records|length > 0 %}
  <div class="table-responsive mt-4">
    <table class="table table-bordered table-striped table-hover align-middle">
      <thead class="table-light">
        <tr class="text-center">
          <th>B·ªánh nh√¢n</th>
          <th>B√°c sƒ©</th>
          <th>Ng√†y ch·∫©n ƒëo√°n</th>
          <th>BMI</th>
          <th>HATT</th>
          <th>HATTr</th>
          <th>Nguy c∆°</th>
          <th>L·ªùi khuy√™n</th>
          <th>Ghi ch√∫</th>
          <th>Ng√†y c·∫≠p nh·∫≠t</th>
        </tr>
      </thead>
      <tbody>
        {% for r in records %}
        <tr>
          <!-- B·ªánh nh√¢n & b√°c sƒ© -->
          <td>{{ r.TenBenhNhan }}</td>
          <td>{{ r.TenBacSi if r.TenBacSi else '‚Äî' }}</td>

          <!-- Ng√†y ch·∫©n ƒëo√°n -->
          <td class="text-center">
            {{ r.NgayChanDoan.strftime('%d/%m/%Y') if r.NgayChanDoan else '‚Äî' }}
          </td>

          <!-- K·∫øt qu·∫£ ch·∫©n ƒëo√°n -->
          <td class="text-center">{{ r.BMI }}</td>
          <td class="text-center">{{ r.HuyetApTamThu }}</td>
          <td class="text-center">{{ r.HuyetApTamTruong }}</td>
          <td class="text-center">
            {% if r.NguyCo == 'Cao' %}
              <span class="badge bg-danger px-3 py-1">Cao</span>
            {% elif r.NguyCo == 'Trung b√¨nh' %}
              <span class="badge bg-warning text-dark px-3 py-1">Trung b√¨nh</span>
            {% else %}
              <span class="badge bg-success px-3 py-1">Th·∫•p</span>
            {% endif %}
          </td>

          <!-- L·ªùi khuy√™n & ghi ch√∫ -->
          <td>{{ r.LoiKhuyen if r.LoiKhuyen else '‚Äî' }}</td>
          <td>{{ r.GhiChu if r.GhiChu else '‚Äî' }}</td>

          <!-- Ng√†y c·∫≠p nh·∫≠t b·ªánh √°n -->
          <td class="text-center">
            {{ r.NgayCapNhat.strftime('%d/%m/%Y') if r.NgayCapNhat else '‚Äî' }}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="alert alert-info mt-4">
    Ch∆∞a c√≥ d·ªØ li·ªáu b·ªánh √°n.
  </div>
  {% endif %}
</div>
{% endblock %}
